[{"content":"准备 备份 网络相关信息（如子网，IP地址，网卡名，网关） 主机名（hostname /etc/hosts） DNS服务器（/etc/resolv.conf） SSH 密钥 Grub配置 硬件信息（/etc/modules.conf） 推荐备份完整的/etc\n思考是否应该手动安装 自动化不一定是脚本小子，只是为了避免不必要的麻烦\nvps2arch 可以全程自动化操作，虽然年久失修 另外，如需lvm你可以直接按上面的脚本或者找别的教程了，原因竟是我没弄过\n正式开始 下载Bootstrap （按实际情况修改时间及镜像，可参考Archlinux Downloads）\n1 2 cd /tmp wget https://geo.mirror.pkgbuild.com/iso/xxxx.xx.xx/archlinux-bootstrap-x86_64.tar.gz 校验 1 2 3 wget https://geo.mirror.pkgbuild.com/iso/xxxx.xx.xx/sha256sums.txt cat ... sha256sum 释放bootstrap 1 tar xzf archlinux-bootstrap-*-x86_64.tar.gz --numeric-owner IMPORTANT：编辑/tmp/root.x86_64/etc/pacman.d/mirrorlist选择镜像源\n准备resolv.conf 1 2 rm /tmp/root.x86_64/etc/resolv.conf cp /etc/resolv.conf /tmp/root.x86_64/etc/ 进入chroot 1 2 mount --bind /boot/efi \u0026#34;/tmp/root.x86_64/boot/efi\u0026#34; # 挂载efi /tmp/root.x86_64/bin/arch-chroot /tmp/root.x86_64/ 若提示FATAL: kernel too old应更新系统内核 若不支持--fork、--pid请参考ArchLinux Wiki，或尝试更新系统 使用chroot环境 pacman-key 初始化 1 2 pacman-key --init pacman-key --populate archlinux 安装软件包 1 2 3 pacman -Syu pacstrap /mnt base linux linux-firmware pacman -S nano vim man-pages mandb texinfo grub openssh 生成fstab 1 genfstab /mnt \u0026gt;\u0026gt; /etc/fstab 本地化 /etc/locale.gen 1 2 en_US.UTF-8 zh_CN.UTF-8 /etc/locale.conf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 LANG=zh_CN.UTF-8 LANGUAGE=zh_CN.UTF-8:en_US.UTF-8 LC_CTYPE=en_US.UTF-8 LC_NUMERIC=zh_CN.UTF-8 LC_TIME=zh_CN.UTF-8 LC_COLLATE=en_US.UTF-8 LC_MONETARY=zh_CN.UTF-8 LC_MESSAGES=zh_CN.UTF-8 LC_PAPER=zh_CN.UTF-8 LC_NAME=zh_CN.UTF-8 LC_ADDRESS=zh_CN.UTF-8 LC_TELEPHONE=zh_CN.UTF-8 LC_MEASUREMENT=zh_CN.UTF-8 LC_IDENTIFICATION=en_US.UTF-8 LC_ALL= 时区 1 2 ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # UTC +8 hwclock --systohc 设置密码 1 passwd 在执行lsblk确认无误后，挂载磁盘\n1 2 mount /dev/sda /mnt rm -r ... IMPORTANT /dev, /sys, /run, /tmp, /proc 不应删除\nrm -rf /*\n开启网络、ssh 编辑/etc/systemd/network/default.network 1 2 3 4 5 6 [Match] Name=eth0 #改为你的网卡名 [Network] Gateway=114.145.114.145 #你的网关 Address=114.145.114.137/24 #你的子网 使用systemd启用服务 1 2 systemctl enable systemd-networkd systemctl enable sshd 准备引导 1 2 grub-install --target=x86_64-efi --efi-directory=/boot/efi grub-mkconfig -o /boot/grub/grub.cfg IMPORTANT：在不支持efi的情况下\n1 grub-install --target=i386-pc --recheck --force /dev/sda Done ! 现在，重启系统，就能看到Arch Linux的字样了\n啥？咋重启，好问题\n怎么重启 先尝试reboot，init 6，shutdown -r等，如果无效（有效才有鬼了）再进行下面的步骤 确保所有数据写入硬盘 1 sync 利用内核参数 激活Magic System Request Key 1 echo 1 \u0026gt; /proc/sys/kernel/sysrq 重启 1 echo \u0026#34;b\u0026#34; \u0026gt; /proc/sysrq-trigger 暴力重启\n包括但不限于，断电，强行关机，服务器控制面板等 参考资料 Arch Linux Wiki Install Arch Linux from existing Linux\n中文页面貌似已过期 Arch Linux Wiki Installation Guide ","date":"2022-07-21T13:55:43+08:00","image":"https://blog.dreamonex.eu.org/p/2022/07/install-arch-from-linux/archlinux_huabecfadfdd744de844b8ea7b92f798ac_30720_120x120_fill_box_smart1_3.png","permalink":"https://blog.dreamonex.eu.org/p/2022/07/install-arch-from-linux/","title":"利用Bootstrap从已有的Linux发行版上安装ArchLinux"},{"content":"其实，编译安装nginx-quic的教程很多，但关于nginx配置有的过时（写于2022-07-14，俺也不能保证我这个不会过时对吧），要么很难找到（事实上我就没找到）\n编译安装 1 paru -S nginx-quic ok了，Arch真好\n配置 http/3使用udp，所以需要额外添加一个listen语句\n1 2 listen 443 ssl http2; listen 443 http3 reuseport; IMPORTANT: 一个端口只需要写一次reuseport 举个例子:\n1 2 3 4 5 6 7 8 9 10 11 12 ... server { ... listen 443 http3 reuseport; ... } server { ... listen 443 http3; ... } ... 踩雷时间到 1. 防火墙未放行 443/udp 激动的心，颤抖的手，但是，忘放行了\n1 2 sudo firewall-cmd --zone=public --add-port=443/udp sudo firewall-cmd --zone=public --add-port=443/udp --permanent 2. Alt-Svc标头和QUIC-Status标头 当时按照网上的教程，抄了一个Alt-Svc，用curl检测时，无法发起http/3请求，查了很久找不到资料，然后 灵机一动 找了个支持http/3的网站抄了一个\n部分教程Alt-Svc标头过期，导致无法发起http/3请求\n1 2 add_header Alt-Svc \u0026#39;h3=\u0026#34;:443\u0026#34;; ma=86400\u0026#39;; add_header QUIC-Status $http3; 3. ssl_stapling ignored 特大号巨坑，全网没几篇文章提到，手搓了半天证书，一直没起作用，搞了好久才发现nginx-quic不支持OCSP而不是证书有问题，另外，实际使用中差别并不大，如果有需要可以用OpenSSL编译nginx-quic\nnginx-quic使用BoringSSL，但是nginx的ocsp实现完全基于OpenSSL，所以sudo nginx -t会提示：\n1 \u0026#34;ssl_stapling\u0026#34; ignored, not supported 没特殊需要，不必管它\n最后 检测HTTP/3支持 http3check nginx配置文件生成 NGINXConfig | DigitalOcean ","date":"2022-07-14T21:48:18+08:00","image":"https://blog.dreamonex.eu.org/p/2022/07/nginx-quic/internet_hude5ec0799e6727eb2b0caf20abd48656_209693_120x120_fill_box_smart1_3.png","permalink":"https://blog.dreamonex.eu.org/p/2022/07/nginx-quic/","title":"nginx-quic部署笔记"},{"content":"长长的祝福 十年寒窗苦读，我们早已蓄势待发；十年寒窗苦读，我们早已胸有成竹。让我们用努力诠释梦想，用勇气创造辉煌，让智慧和信念在这骄阳似火的六月闪闪发光。让我们勇往直前，搏击长空，追逐梦想，书写辉煌！\n举胸中豪情，倾满腔热血。与雷霆搏击，同日月争光。\n我们，注定成功。我们，必将辉煌。\n祝所有中高考考生前程似锦，未来可期；愿你们怀着“天生我才必有用”的信心，揣着“铁马冰河入梦来”的决心，带着“横眉冷对千夫指”的勇气，征战考场，一战成名！“长风破浪会有时，直挂云帆济沧海”，愿你们不畏挫折，最终走向理想的高中！\n","date":"2022-06-13T17:52:01+08:00","image":"https://blog.dreamonex.eu.org/p/2022/06/bless-2022/school_hu7bbbd15edbb5f04646106472d28a513b_9643286_120x120_fill_box_smart1_3.png","permalink":"https://blog.dreamonex.eu.org/p/2022/06/bless-2022/","title":"对2022中高考考生的祝福（虽然高考过了"},{"content":"初心使命 开这个博客，主要是分享一些学习，生活的心得 ;-) 很高兴见到你\n先偷个懒，回头再写\n2022年6月8日: 这回头好像有点久啊\u0026hellip;\n2022年6月12日凌晨: 还有两天就要中考了= =，睡不着，把这个写完吧\n2022年6月13日两点：突然发现了hugo和stack，换换换（\n我的情况 大概6.20我中考结束后会开始打理这个博客，毕竟高中了，一个月更新一次就不错了 不过，我还会要求自己一个月两次的\n我的计划 换一个好看的主题 弄一个rss 6月写三篇博文 嗯就这样吧，中考加油！)\n","date":"2022-06-07T00:00:00Z","permalink":"https://blog.dreamonex.eu.org/p/2022/06/hello-world/","title":"Hello World | 博客开张 ;-)"}]